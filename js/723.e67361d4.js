"use strict";(self["webpackChunkweek_7_project"]=self["webpackChunkweek_7_project"]||[]).push([[723],{8536:function(t,a,e){e.d(a,{Z:function(){return y}});var l=e(6252),i=e(3577),s=e(9963);const d={"aria-label":"Page navigation"},o={class:"pagination justify-content-center"},r=["aria-disabled"],n={key:0,class:"page-link"},c=["onClick"],p=["aria-disabled"];function u(t,a,e,u,m,h){return(0,l.wg)(),(0,l.iD)("nav",d,[(0,l._)("ul",o,[(0,l._)("li",{class:(0,i.C_)(["page-item",{disabled:!e.hasPre}])},[(0,l._)("a",{class:"page-link",href:"#",tabindex:"-1","aria-disabled":!e.hasPre,onClick:a[0]||(a[0]=(0,s.iM)((t=>h.emitData(e.currentPage-1)),["prevent"]))},"Previous",8,r)],2),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.totalPages,((t,a)=>((0,l.wg)(),(0,l.iD)("li",{class:(0,i.C_)(["page-item",{active:t===e.currentPage}]),key:a},[t===e.currentPage?((0,l.wg)(),(0,l.iD)("span",n,(0,i.zw)(t),1)):((0,l.wg)(),(0,l.iD)("a",{key:1,class:"page-link",href:"#",onClick:(0,s.iM)((a=>h.emitData(t)),["prevent"])},(0,i.zw)(t),9,c))],2)))),128)),(0,l._)("li",{class:(0,i.C_)(["page-item",{disabled:!e.hasNext}])},[(0,l._)("a",{class:"page-link",href:"#","aria-disabled":!e.hasNext,onClick:a[1]||(a[1]=(0,s.iM)((t=>h.emitData(e.currentPage+1)),["prevent"]))},"Next",8,p)],2)])])}var m={data(){return{}},props:["currentPage","hasPre","hasNext","totalPages"],methods:{emitData(t){this.$emit("click-page",t)}}},h=e(3744);const b=(0,h.Z)(m,[["render",u]]);var y=b},4723:function(t,a,e){e.r(a),e.d(a,{default:function(){return Xt}});var l=e(6252),i=e(3577);const s={class:"container"},d=(0,l._)("h2",{class:"my-5 ms-2 fw-bold text-center"},"產品管理列表",-1),o={class:"text-end mt-4"},r={class:"row py-3"},n={class:"col-xl-6"},c={class:"table mt-4"},p=(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{width:"100"},"分類"),(0,l._)("th",null,"產品名稱"),(0,l._)("th",{width:"100"},"原價"),(0,l._)("th",{width:"100"},"售價"),(0,l._)("th",{width:"100"},"是否啟用"),(0,l._)("th",{width:"100"},"功能按鈕")])],-1),u={class:"fw-bold text-decoration-underline"},m={class:"text-secondary fw-light"},h={class:"fw-bold"},b={key:0,class:"text-success"},y={key:1,class:"text-danger"},D=["data-id"],g=["data-detail-id","onClick"],_=["data-edit-id","onClick"],w=["data-delete-id","onClick"],v={class:"col-xl-6"},f=(0,l.Uk)("> ");function k(t,a,e,k,x,U){const C=(0,l.up)("ProductDetail"),O=(0,l.up)("EditModal"),P=(0,l.up)("PaginationFooter");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",s,[d,(0,l._)("div",o,[(0,l._)("button",{class:"btn btn-primary",onClick:a[0]||(a[0]=t=>U.modalOn("new"))}," 建立新的產品 ")]),(0,l._)("div",r,[(0,l._)("div",n,[(0,l._)("table",c,[p,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(x.productsList,((t,a)=>((0,l.wg)(),(0,l.iD)("tr",{key:a},[(0,l._)("td",null,(0,i.zw)(t.category),1),(0,l._)("td",u,(0,i.zw)(t.title),1),(0,l._)("td",m,(0,i.zw)(t.origin_price),1),(0,l._)("td",h,(0,i.zw)(t.price),1),(0,l._)("td",null,[t.is_enabled?((0,l.wg)(),(0,l.iD)("span",b,"啟用")):((0,l.wg)(),(0,l.iD)("span",y,"未啟用"))]),(0,l._)("td",null,[(0,l._)("div",{class:"btn-group","data-id":a},[(0,l._)("button",{type:"button",class:"btn btn-outline-success btn-sm","data-detail-id":a,onClick:a=>U.productDetail(t)}," 細節 ",8,g),(0,l._)("button",{type:"button",class:"btn btn-outline-primary btn-sm","data-edit-id":a,onClick:a=>U.modalOn("edit",t)}," 編輯 ",8,_),(0,l._)("button",{type:"button",class:"btn btn-outline-danger btn-sm","data-delete-id":a,onClick:a=>U.modalOn("delete",t)}," 刪除 ",8,w)],8,D)])])))),128))])])]),(0,l._)("div",v,[(0,l.Wm)(C,{"product-display":x.emitData.productDisplay,"detail-display":x.emitData.detailDisplay},null,8,["product-display","detail-display"])])])]),(0,l.Wm)(O,{ref:"editModal",onGetData:U.getData},null,8,["onGetData"]),f,(0,l.Wm)(P,{"current-page":x.current_page,"has-pre":x.has_pre,"has-next":x.has_next,"total-pages":x.total_pages,onClickPage:U.getData},null,8,["current-page","has-pre","has-next","total-pages","onClickPage"])],64)}var x=e(9963);const U={id:"delProductModal",ref:"delProductModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},C={class:"modal-dialog"},O={class:"modal-content border-0"},P=(0,l.uE)('<div class="modal-header bg-danger text-white"><h5 id="delProductModalLabel" class="modal-title"><span>刪除產品</span></h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"> 是否刪除 <strong class="text-danger"></strong> 商品(刪除後將無法恢復)。 </div>',2),M={class:"modal-footer"},z=(0,l._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1),$={id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},N={class:"modal-dialog modal-xl"},V={class:"modal-content border-0"},L={class:"modal-header bg-dark text-white"},H={id:"productModalLabel",class:"modal-title"},Y={key:0},Z={key:1},j=(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),F={class:"modal-body container"},K={class:"row"},T={class:"col-sm-12 col-md-6"},q={class:"mb-2"},E={class:"mb-3"},W=(0,l._)("label",{for:"imageUrl",class:"form-label"},"輸入圖片網址",-1),G=["src"],S={class:"form-group"},A=(0,l._)("label",{for:"imagesUrl",class:"form-label"},"圖片網址",-1),B=["onUpdate:modelValue"],I=["src"],J={key:0},Q={key:1},R={class:"col-sm-12 col-md-6"},X={class:"mb-3"},tt=(0,l._)("label",{for:"title",class:"form-label"},"標題",-1),at={class:"row"},et={class:"mb-3 col-md-6"},lt=(0,l._)("label",{for:"category",class:"form-label"},"分類",-1),it={class:"mb-3 col-md-6"},st=(0,l._)("label",{for:"price",class:"form-label"},"單位",-1),dt={class:"row"},ot={class:"mb-3 col-md-6"},rt=(0,l._)("label",{for:"origin_price",class:"form-label"},"原價",-1),nt={class:"mb-3 col-md-6"},ct=(0,l._)("label",{for:"price",class:"form-label"},"售價",-1),pt=(0,l._)("hr",null,null,-1),ut={class:"mb-3"},mt=(0,l._)("label",{for:"description",class:"form-label"},"產品描述",-1),ht={class:"mb-3"},bt=(0,l._)("label",{for:"content",class:"form-label"},"說明內容",-1),yt={class:"mb-3"},Dt={class:"form-check"},gt=(0,l._)("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),_t={class:"modal-footer bg-dark text-white"},wt=(0,l._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function vt(t,a,e,s,d,o){return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.wy)((0,l._)("div",U,[(0,l._)("div",C,[(0,l._)("div",O,[P,(0,l._)("div",M,[z,(0,l._)("button",{type:"button",class:"btn btn-danger",onClick:a[0]||(a[0]=(...t)=>o.updateData&&o.updateData(...t))}," 確認刪除 ")])])])],512),[[x.F8,t.delteOn]]),(0,l.wy)((0,l._)("div",$,[(0,l._)("div",N,[(0,l._)("div",V,[(0,l._)("div",L,[(0,l._)("h5",H,[d.newOn?((0,l.wg)(),(0,l.iD)("span",Y,(0,i.zw)(d.newTitle),1)):((0,l.wg)(),(0,l.iD)("span",Z,(0,i.zw)(d.editTitle),1))]),j]),(0,l._)("div",F,[(0,l._)("div",K,[(0,l._)("div",T,[(0,l._)("div",q,[(0,l._)("div",E,[W,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":a[1]||(a[1]=t=>d.productDisplay.imageUrl=t)},null,512),[[x.nr,d.productDisplay.imageUrl]])]),(0,l._)("img",{class:"img-fluid",src:d.productDisplay.imageUrl,alt:""},null,8,G),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.productDisplay.imagesUrl,((t,a)=>((0,l.wg)(),(0,l.iD)("div",{class:"mb-1",key:a},[(0,l._)("div",S,[A,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t=>d.productDisplay.imagesUrl[a]=t,type:"text",class:"form-control",placeholder:"請輸入圖片連結"},null,8,B),[[x.nr,d.productDisplay.imagesUrl[a]]])]),(0,l._)("img",{class:"img-fluid",src:t,alt:""},null,8,I)])))),128)),!d.productDisplay.imagesUrl.length||d.productDisplay.imagesUrl[d.productDisplay.imagesUrl.length-1]?((0,l.wg)(),(0,l.iD)("div",J,[(0,l._)("button",{type:"button",class:"btn btn-outline-primary btn-sm d-block w-100",onClick:a[2]||(a[2]=t=>d.productDisplay.imagesUrl.push(""))}," 新增圖片 ")])):((0,l.wg)(),(0,l.iD)("div",Q,[(0,l._)("button",{type:"button",class:"btn btn-outline-danger btn-sm d-block w-100",onClick:a[3]||(a[3]=t=>d.productDisplay.imagesUrl.pop())}," 刪除圖片 ")]))])]),(0,l._)("div",R,[(0,l._)("div",X,[tt,(0,l.wy)((0,l._)("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":a[4]||(a[4]=t=>d.productDisplay.title=t)},null,512),[[x.nr,d.productDisplay.title]])]),(0,l._)("div",at,[(0,l._)("div",et,[lt,(0,l.wy)((0,l._)("input",{id:"category",type:"text",class:"form-control",placeholder:"請輸入分類","onUpdate:modelValue":a[5]||(a[5]=t=>d.productDisplay.category=t)},null,512),[[x.nr,d.productDisplay.category]])]),(0,l._)("div",it,[st,(0,l.wy)((0,l._)("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位","onUpdate:modelValue":a[6]||(a[6]=t=>d.productDisplay.unit=t)},null,512),[[x.nr,d.productDisplay.unit]])])]),(0,l._)("div",dt,[(0,l._)("div",ot,[rt,(0,l.wy)((0,l._)("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價","onUpdate:modelValue":a[7]||(a[7]=t=>d.productDisplay.origin_price=t)},null,512),[[x.nr,d.productDisplay.origin_price]])]),(0,l._)("div",nt,[ct,(0,l.wy)((0,l._)("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入售價","onUpdate:modelValue":a[8]||(a[8]=t=>d.productDisplay.price=t)},null,512),[[x.nr,d.productDisplay.price]])])]),pt,(0,l._)("div",ut,[mt,(0,l.wy)((0,l._)("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述","onUpdate:modelValue":a[9]||(a[9]=t=>d.productDisplay.description=t)},"\n                ",512),[[x.nr,d.productDisplay.description]])]),(0,l._)("div",ht,[bt,(0,l.wy)((0,l._)("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入說明內容","onUpdate:modelValue":a[10]||(a[10]=t=>d.productDisplay.content=t)},"\n                ",512),[[x.nr,d.productDisplay.content]])]),(0,l._)("div",yt,[(0,l._)("div",Dt,[(0,l.wy)((0,l._)("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":a[11]||(a[11]=t=>d.productDisplay.is_enabled=t)},null,512),[[x.e8,d.productDisplay.is_enabled]]),gt])])])]),(0,l._)("div",_t,[wt,(0,l._)("button",{type:"button",class:"btn btn-primary",onClick:a[12]||(a[12]=(...t)=>o.updateData&&o.updateData(...t))}," 確認 ")])])])])],512),[[x.F8,!t.deletOn]])],64)}var ft=e(7424),kt=e.n(ft),xt={inject:["emitData"],data(){return{newTitle:"新增產品",editTitle:"編輯產品",bsNewproduct:null,bsDeleteproduct:null,productDisplay:this.emitData.productDisplay,newOn:this.emitData.newOn,detailDisplay:this.emitData.detailDisplay,deleteOn:this.emitData.deleteOn}},watch:{emitData:{handler(){this.productDisplay=this.emitData.productDisplay,this.newOn=this.emitData.newOn,this.detailDisplay=this.emitData.detailDisplay,this.deleteOn=this.emitData.deleteOn},deep:!0}},methods:{updateData(){this.newOn?this.$http.post("https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/admin/product",{data:this.productDisplay}).then((t=>{alert(t.data.message),this.bsNewproduct.hide(),this.$emit("get-data")})).catch((t=>{alert(t.data.message),this.bsNewproduct.hide()})):this.deleteOn?this.$http.delete(`https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/admin/product/${this.productDisplay.id}`).then((t=>{alert(t.data.message),this.$emit("get-data"),this.bsDeleteproduct.hide()})).catch((t=>{alert(t.data.message),this.bsDeleteproduct.hide()})):this.$http.put(`https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/admin/product/${this.productDisplay.id}`,{data:this.productDisplay}).then((t=>{alert(t.data.message),this.bsNewproduct.hide(),this.$emit("get-data")})).catch((t=>{alert(t.data.message),this.bsNewproduct.hide()}))}},mounted(){this.bsNewproduct=new(kt())(document.querySelector("#productModal")),this.bsDeleteproduct=new(kt())(document.querySelector("#delProductModal"))}},Ut=e(3744);const Ct=(0,Ut.Z)(xt,[["render",vt]]);var Ot=Ct,Pt=e(8536);const Mt={key:0},zt={class:"card mb-3"},$t=["src"],Nt={class:"card-body"},Vt={class:"card-title"},Lt={class:"badge bg-primary ms-2"},Ht={class:"card-text"},Yt={class:"card-text"},Zt={class:"d-flex"},jt={class:"card-text me-2"},Ft={class:"card-text text-secondary"},Kt={key:0},Tt=["src"],qt={key:1,class:"text-secondary"},Et=(0,l.Uk)(" 請點擊"),Wt=(0,l._)("span",{class:"text-danger"},"呈現細節",-1),Gt=(0,l.Uk)("按鈕，查看商品細節 "),St=[Et,Wt,Gt];function At(t,a,e,s,d,o){return e.detailDisplay?((0,l.wg)(),(0,l.iD)("div",Mt,[(0,l._)("div",zt,[(0,l._)("img",{src:e.productDisplay.imageUrl,class:"card-img-top primary-image",alt:"主圖"},null,8,$t),(0,l._)("div",Nt,[(0,l._)("h5",Vt,[(0,l.Uk)((0,i.zw)(e.productDisplay.title),1),(0,l._)("span",Lt,(0,i.zw)(e.productDisplay.category),1)]),(0,l._)("p",Ht,"商品描述："+(0,i.zw)(e.productDisplay.description),1),(0,l._)("p",Yt,"商品內容："+(0,i.zw)(e.productDisplay.content),1),(0,l._)("div",Zt,[(0,l._)("p",jt,(0,i.zw)(e.productDisplay.price),1),(0,l._)("p",Ft,[(0,l._)("del",null,(0,i.zw)(e.productDisplay.origin_price),1)]),(0,l.Uk)(" "+(0,i.zw)(e.productDisplay.unit)+" / 元 ",1)])])]),e.productDisplay.id?((0,l.wg)(),(0,l.iD)("div",Kt,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.productDisplay.imagesUrl,((t,a)=>((0,l.wg)(),(0,l.iD)("img",{src:t,key:a,alt:"",class:"images m-2"},null,8,Tt)))),128))])):(0,l.kq)("",!0)])):((0,l.wg)(),(0,l.iD)("p",qt,St))}var Bt={data(){return{}},props:["productDisplay","detailDisplay"]};const It=(0,Ut.Z)(Bt,[["render",At]]);var Jt=It,Qt={data(){return{productsList:null,current_page:1,has_next:!0,has_pre:!1,total_pages:1,emitData:{productDisplay:{imagesUrl:[]},newOn:!1,detailDisplay:!1,deleteOn:!1}}},components:{EditModal:Ot,PaginationFooter:Pt.Z,ProductDetail:Jt},provide(){return{emitData:this.emitData}},methods:{getData(t=1){this.$http.get(`https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/admin/products?page=${t}`).then((t=>{console.log(t.data.products),this.productsList=t.data.products,this.current_page=t.data.pagination.current_page,this.has_next=t.data.pagination.has_next,this.has_pre=t.data.pagination.has_pre,this.total_pages=t.data.pagination.total_pages})).catch((t=>{alert(t.message)}))},modalOn(t,a){"edit"===t?(this.emitData.productDisplay={imagesUrl:[]},this.emitData.detailDisplay=!1,this.emitData.productDisplay=a,this.$refs.editModal.bsNewproduct.show()):"new"===t?(this.emitData.productDisplay={imagesUrl:[]},this.emitData.newOn=!0,this.emitData.detailDisplay=!1,this.emitData.deleteOn=!1,this.$refs.editModal.bsNewproduct.show()):"delete"===t&&(this.emitData.productDisplay={imagesUrl:[]},this.emitData.productDisplay=a,this.emitData.newOn=!1,this.emitData.detailDisplay=!1,this.emitData.deleteOn=!0,this.$refs.editModal.bsDeleteproduct.show())},productDetail(t){this.emitData.productDisplay=t,this.emitData.detailDisplay=!0}},mounted(){this.getData()}};const Rt=(0,Ut.Z)(Qt,[["render",k]]);var Xt=Rt}}]);
//# sourceMappingURL=723.e67361d4.js.map