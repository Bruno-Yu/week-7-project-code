{"version":3,"file":"js/849.ad482167.js","mappings":"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","sources":["webpack://week-7-project/./src/views/ProductsView.vue","webpack://week-7-project/./src/components/ProductModal.vue","webpack://week-7-project/./src/components/ProductModal.vue?b0ff","webpack://week-7-project/./src/views/ProductsView.vue?91db"],"sourcesContent":["<template>\n  <div class=\"mt-4\">\n    <ProductModal\n      :id=\"productId\"\n      ref=\"productModal\"\n      @add-cart=\"addToCart\"\n    ></ProductModal>\n  </div>\n  <h2 class=\"my-5 ms-2 fw-bold text-center\">產品/服務列表</h2>\n  <div class=\"card-group\">\n    <div class=\"row row-cols-1 row-cols-lg-4 g-2 g-lg-3\">\n      <div class=\"col\" v-for=\"product in products\" :key=\"product.id\">\n        <div class=\"card h-100 mb-3\" style=\"max-width: 540px\">\n          <div class=\"row g-0\">\n            <div class=\"col-4\">\n              <img\n                :src=\"product.imageUrl\"\n                class=\"img-fluid card-img rounded-start\"\n                alt=\"...\"\n              />\n            </div>\n            <div class=\"col-8\">\n              <div class=\"card-body\">\n                <h5 class=\"card-title fw-bolder\">{{ product.title }}</h5>\n                <p class=\"card-text text-secondary\">\n                  {{ product.description }}\n                </p>\n              </div>\n\n              <div class=\"card-footer bg-light d-flex justify-content-end\">\n                <button\n                  type=\"button\"\n                  class=\"btn btn-outline-dark btn-sm me-2\"\n                  @click=\"openProductModal(product.id)\"\n                >\n                  查看細節\n                </button>\n                <button\n                  type=\"button\"\n                  class=\"btn btn-dark btn-sm\"\n                  @click=\"addToCart(product.id)\"\n                >\n                  加入購物車\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ProductModal from '../components/ProductModal.vue';\n\nexport default {\n  data() {\n    return {\n      products: [],\n      productId: '',\n      addNum: 0,\n      // 局部讀取效果對應變數\n      isLoadingItem: '',\n    };\n  },\n  components: {\n    ProductModal,\n  },\n  methods: {\n    getProducts() {\n      this.$http\n        .get(\n          `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`,\n        )\n        .then((res) => {\n          this.products = res.data.products;\n        });\n    },\n    openProductModal(id) {\n      this.productId = id;\n      // 使用$refs調用productModal元件的 openModal()方法\n      this.$refs.productModal.openModal();\n    },\n    addToCart(id, qty = 1) {\n      // post cart的api資料格式\n      const data = {\n        product_id: id,\n        qty,\n      };\n      // 局部讀取效果賦值對應id\n      this.isLoadingItem = id;\n      // axios.post 加入購物車列表\n      this.$http\n        .post(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`,\n          { data },\n        )\n        .then((res) => {\n          console.log(res);\n          // 清空局部讀取效果\n          this.isLoadingItem = '';\n        });\n    },\n  },\n  mounted() {\n    this.getProducts();\n  },\n};\n</script>\n","<template>\n  <div\n    class=\"modal fade\"\n    id=\"productModal\"\n    tabindex=\"-1\"\n    role=\"dialog\"\n    aria-labelledby=\"exampleModalLabel\"\n    aria-hidden=\"true\"\n    ref=\"modal\"\n  >\n    <div class=\"modal-dialog modal-xl\" role=\"document\">\n      <div class=\"modal-content border-0\">\n        <div class=\"modal-header bg-dark text-white\">\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">\n            <span>{{ product.title }}</span>\n          </h5>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"row\">\n            <div class=\"col-sm-6\">\n              <img class=\"img-fluid\" :src=\"product.imageUrl\" alt=\"\" />\n            </div>\n            <div class=\"col-sm-6\">\n              <span class=\"badge bg-primary rounded-pill\"> </span>\n              <p>商品描述：{{ product.description }}</p>\n              <p>商品內容：{{ product.content }}</p>\n              <div class=\"h5\">{{ product.unit }}</div>\n              <del class=\"h6 text-secondary small\">原價 {{ product.origin_price }} 元</del>\n              <div class=\"h5\">現在只要 {{ product.price }} 元</div>\n              <div>\n                <div class=\"input-group\">\n                  <!-- 數量用v-modal綁定 product-modal元件資料屬性 -->\n                  <!-- 注意: 有設定最小值屬性 min -->\n                  <!-- 但是是input標籤，所以會有bug如可以輸入負數、寫e -->\n                  <!-- 建議用select -->\n                  <input type=\"number\" class=\"form-control\" min=\"1\" v-model=\"qty\" />\n                  <!-- 加入購物車功能按鈕 -->\n                  <button type=\"button\" class=\"btn btn-dark\" @click=\"addToCart\">加入購物車</button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport modal from 'bootstrap/js/dist/modal';\n\nexport default {\n  props: ['id'],\n  data() {\n    return {\n      bsModal: {},\n      product: {},\n      isLoadingItem: '',\n      // 購物車的項目至少要有1個，所以需要填1作為預設值\n      qty: 1,\n    };\n  },\n  watch: {\n    // 當id有變動時，就觸發在元件內的getProdct()\n    // 因為id是根元件openProductModal方法傳入的，有變動代表使用者點擊的對象不同\n    id() {\n      this.getProduct();\n    },\n  },\n  methods: {\n    // 先將modal相關方法放在這邊，之後可以使用this.$refs在其他元件使用\n    // 開啟modal方法\n    openModal() {\n      this.bsModal.show();\n    },\n    // 關閉modal方法\n    closeModal() {\n      this.bsModal.hide();\n    },\n    // 元件內利用props進來的id(openProductModal方法賦值的id)來取得遠端對應資料\n    getProduct() {\n      this.$http(\n        `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/product/${this.id}`,\n      ).then((res) => {\n        // 取得對應的單一產品並賦值元件內資料\n        this.product = res.data.product;\n      });\n    },\n    // 觸發元件內的addToCart()方法\n    // 使用$emit 連結根元件的addToCart方法，注意要帶入兩個參數 1.產品id 2.數量\n    addToCart() {\n      this.$emit('add-cart', this.product.id, this.qty);\n    },\n  },\n  mounted() {\n    // 將BS的Modal方法實體化加入\n    // 在js使用this.$refs抓樣板內的dorm元素\n    // eslint-disable-next-line\n    this.bsModal = new modal(this.$refs.modal);\n    // 若是在外部設let modal=null直到在元件內賦值的話，由於作用域不同，ESLint會顯示紅線，若要在相同作用域使用，則要使用元件內資料變數賦值的方法\n  },\n};\n</script>\n","import { render } from \"./ProductModal.vue?vue&type=template&id=119427a0\"\nimport script from \"./ProductModal.vue?vue&type=script&lang=js\"\nexport * from \"./ProductModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\jackh\\\\OneDrive\\\\Documents\\\\Github-res\\\\hexschool-vue-projects\\\\Homework\\\\week-7-project-code\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ProductsView.vue?vue&type=template&id=6aff1556\"\nimport script from \"./ProductsView.vue?vue&type=script&lang=js\"\nexport * from \"./ProductsView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\jackh\\\\OneDrive\\\\Documents\\\\Github-res\\\\hexschool-vue-projects\\\\Homework\\\\week-7-project-code\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","_createVNode","_component_ProductModal","id","$data","ref","onAddCart","$options","_hoisted_2","_createElementBlock","_Fragment","_renderList","product","key","src","imageUrl","alt","_toDisplayString","title","description","type","onClick","_hoisted_14","_hoisted_15","tabindex","role","_hoisted_6","_hoisted_12","content","unit","origin_price","price","min","$event","props","data","bsModal","isLoadingItem","qty","watch","this","getProduct","methods","openModal","show","closeModal","hide","$http","then","res","addToCart","$emit","mounted","modal","$refs","__exports__","products","productId","addNum","components","ProductModal","getProducts","get","openProductModal","productModal","product_id","post","console","log","render"],"sourceRoot":""}